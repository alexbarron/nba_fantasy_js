<h1>Create a New Player</h1>
<h4>Enter a Basketball Reference Player Profile URL</h4>
<p>For example Kobe Bryant's profile URL is http://www.basketball-reference.com/players/b/bryanko01.html</p>
<%= render 'form' %>

<h3 id="status"></h3>

<div id="playerResult">
  
  <p id="score"></p>
  <p id="salary"></p>
  <p id="value"></p>

  <table class="table table-striped table-condensed">
    <tr>
      <th>Points</th>
      <th>Assists</th>
      <th>Rebounds</th>  
      <th>Blocks</th>
      <th>Steals</th>
      <th>Games Played</th>
    </tr>
    <tr>
      <td id="points"></td>
      <td id="assists"></td>
      <td id="rebounds"></td>
      <td id="blocks"></td>
      <td id="steals"></td>
      <td id="games_played"></td>
    </tr>
  </table>
</div>

<script type="text/javascript">
  $(function () {
    $('form').submit(function(event) {
      $("#status").text("Loading new player...");

      event.preventDefault();
      
      var player_url = $(this).serialize();

      var posting = $.post('/players', player_url);

      posting.done(function(data){
        $("#playerResult").show();

        $("#status").text("Successfully added " + data.player.name);
        $("#score").text('Score: ' + data.player.score);
        $("#salary").text('Salary: $' + data.player.salary.toLocaleString());
        $("#value").text('Score Per Million: ' + data.player.value);

        $("#points").text(data.player.points);
        $("#assists").text(data.player.assists);
        $("#rebounds").text(data.player.rebounds);
        $("#blocks").text(data.player.blocks);
        $("#steals").text(data.player.steals);
        $("#games_played").text(data.player.games_played);

        $("#playerUrl").val("");
      })
    });
  });
</script>